!function(e){function r(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerShader("chromakey",{schema:{src:{type:"map"},color:{default:{x:.1,y:.9,z:.2},type:"vec3",is:"uniform"},transparent:{default:!0,is:"uniform"}},init:function(e){var r=new THREE.VideoTexture(e.src);r.minFilter=THREE.LinearFilter,this.material=new THREE.ShaderMaterial({uniforms:{color:{type:"c",value:e.color},texture:{type:"t",value:r}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader})},update:function(e){this.material.color=e.color,this.material.src=e.src,this.material.transparent=e.transparent},vertexShader:["varying vec2 vUv;","void main(void)","{","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform sampler2D texture;","uniform vec3 color;","varying vec2 vUv;","void main(void)","{","vec3 tColor = texture2D( texture, vUv ).rgb;","float a = (length(tColor - color) - 0.5) * 7.0;","gl_FragColor = vec4(tColor, a);","}"].join("\n")})}]);