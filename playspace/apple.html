<!DOCTYPE html>
<html>
  <head>
    <title>Play Space AR - Playing the Archive</title>
    <meta name="description" content="Play Space AR - Playing the Archive">
	
	 <style>
  .wrapper {
    text-align: center;
	}

.button {
  background-color: #4CAF50;
  border: none;
  bottom:0px;
  color: white;
  padding: 55px 65px;
  text-align: center;
  font-size: 26px;
  cursor: pointer;
  position:absolute;
  left:0px;

}

.button:hover {
  background-color: green;
}
</style>
	
	
	<!--needed for Edge-->
	<script src="https://cdn.jsdelivr.net/npm/fast-text-encoding@1.0.0/text.min.js"></script>
	
	
	<!--stable version 0.8.0 | Dev version 0.9.0 | Local version 0.8.2 -->
	 <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script> 
	<!--<script src="js/aframe.min.js"></script>
	<script src="js/aframe.min.js.map"></script>-->
	
	<!--DEV Version AR.Js 1.6.3-->
	<!--<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/dev/aframe/build/aframe-ar.js"></script>-->
	<script src="js/aframe-ar.js"></script>
	
	
	<!-- Load GLTF Animation-->
	<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
	<script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
	
	<!-- Chroma Key Shader-->
	<script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>
	
	
	
	
	
	<script src="js/markermanager.js"></script>
	
	
	
		
	</head>
	
	<body>
	
	<!-- add to a-scene arjs="" debugUIEnabled: false;-->
	<a-scene vr-mode-ui="enabled: false" color-space="sRGB" renderer="gammaOutput: true" embedded arjs='debugUIEnabled: false; sourceType: webcam; patternRatio: 0.85; trackingMethod: best;'>
	
	<a-assets markInit>
	
		<audio id="song" src="resources/DigDug.mp3"></audio>
		
		<video id="mocapVideo"  src="resources/Solo_Mocap_low.mp4" loop webkit-playsinline playsinline></video>
		
		<video id="chromaVideo" src="resources/stval_1.mp4" loop  webkit-playsinline playsinline ></video>
		
		
		
		<img id="opies" src="resources/opies.jpg">
		<img id="marble" src="resources/marble.jpg">
		<img id="hopscotch" src="resources/TwentyFive_BKGR.jpg">
		<img id="chrBk" src="resources/Bkgrd.jpg">
		<img id="grass" src="resources/grassblades.png">
		
		
		<a-asset-item id="ajWalk" src="resources/ajwalk/WalkingAJRecenter.gltf" position="0 0.1 0" scale="1 1 1"></a-asset-item>
	
	</a-assets>
	
	
	
	
	<!--Markers-->
	
	<!--Video - Swords-->
	<a-marker  type="pattern" url="resources/markers/swords.patt" id='markerswords' registerevents >
		<a-box id='star-box' position='0 -0.25 0' scale='1 0.01 1' material='shader: standard; color:#fef2e2;'></a-box>
		
		<a-video id='videoA' src="#mocapVideo" width="2.5" height="1.5" position="0 0.2 0" rotation="-90 0 0" material="shader:flat;"></a-video>
	
	</a-marker>
	
	<!--Video Chroma key - Epsilon-->
	<a-marker  type="pattern" url="resources/markers/epsilon.patt" id='markerepsilon' registerevents >
		
		<a-box id='star-box' position='0 -0.25 0' scale='1 0.01 1' material='shader: standard; color:#fef2e2;'></a-box>
		
		<a-video id="videoB" class="video" position="0 0.583 0" rotation="0 0 0" scale="2 2 2" material="shader: chromakey; src: #chromaVideo; color: 0 1 0"  ></a-video>	
				
	</a-marker>
	
	<!--Images - Shield-->
	<a-marker  type="pattern" url="resources/markers/shield.patt" id='markershield' registerevents >
		<a-box id='star-box' position='0 -0.25 0' scale='1 0.01 1' material='shader: standard; color:#fef2e2;'></a-box>
		<a-image src="#opies" position='0 0.1 0' width='1.6' height='1' rotation="-90 0 0" ></a-image>
	</a-marker>
	
	<!--Sound - Hydra-->
	<a-marker  type="pattern" url="resources/markers/hydra.patt" id='markerhydra' registerevents >
	<a-entity animation="property: rotation; from:0 0 0; to: 0 360 0; loop: true; dur: 5000;easing:linear"; >
		<a-sphere id='boxsound' position='0 0 1' scale='0.25 0.25 0.25' material="shader: standard; src: #marble;" animation="property: rotation; from:0 0 360; to: 0 0 0; loop: true; dur: 800;easing:linear";></a-sphere>
		<a-entity id="thesound" position="0 2 3" sound="src:#song; positional:true; loop:true" ></a-entity>
	</a-entity>
		
	</a-marker>
	
	<!--3D model - Toycar-->
	<a-marker  type="pattern" url="resources/markers/toycar.patt" id='markertoycar' registerevents >
		<a-box id='star-box' position='0 0 0' scale='1 0.1 1' material='shader: standard; src:#hopscotch;'></a-box>
		
		<a-gltf-model src="#ajWalk" position="0 0.15 -0.3" rotation="0 90 0" scale='0.5 0.5 0.5' animation-mixer></a-gltf-model>
	
	</a-marker>
	
	
	
		
	<a-entity camera>
		<a-cursor> </a-cursor>
	</a-entity>
	
	
	
	</a-scene>
	
		<div id="wrapperid" class="wrapper">

		<button id="entervr" class="button" type="button">
			Play
		</button>
	 </div>
	
	
	
	<script>

//Just in case pause the videos
		var checktap=false
		
		var sceneEl = document.querySelector('a-scene');
		
		var videoChroma = document.querySelector('#chromaVideo');
		
		var videoMocap = document.querySelector('#mocapVideo');
		
		var videoAMarker=document.querySelector('#videoB');
  
		


//if iOS true
document.addEventListener("DOMContentLoaded", function(event)
{
videoChroma.setAttribute("src","resources/"+"CardDuo_Both_v2"+".mp4");//just modify the directory and the exstension. File name need to be the same
console.log(videoChroma.getAttribute("src"));
	videoChroma.pause();
	videoMocap.pause();
		console.log ("video pause due to autoplay declaration");


var button=document.querySelector('#entervr')
button.addEventListener('click',go);
var iOS=false,
p=navigator.platform;

if(p==='iPad'||p==='iPhone'||p==='iPod')
{
iOS=true;
checktap=false;
button.style.visibility='visible';

}

if(iOS===false){//
checktap=true;
button.style.visibility='hidden';

}


});

var go=function(){
console.log("Toggle the video");
var videos1=document.querySelector('#markerepsilon');
var videos2=document.querySelector('#markerswords');
console.log(videos1.getAttribute('visible'));


	if (!chromaVideo ) { return; }
		if(videos1.getAttribute('visible')==true){
		chromaVideo.paused ? chromaVideo.play() : chromaVideo.pause();
		chromaVideo.paused ? document.getElementById("entervr").innerHTML="Pause":document.getElementById("entervr").innerHTML="Play";
		chromaVideo.muted=false;}
		
		
	if (!videoMocap) { return; }
	if(videos2.getAttribute('visible')==true){
		videoMocap.paused ? videoMocap.play() : videoMocap.pause();
		videoMocap.paused ? document.getElementById("entervr").innerHTML="Pause":document.getElementById("entervr").innerHTML="Play";
		videoMocap.muted=false;}
		
		
}
//the button

</script>
	
	
	
	
	</body>
	
	</html>