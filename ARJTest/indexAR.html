<!DOCTYPE html>
<html>
  <head>
    <title>Augmented Trail - Playing the Archive</title>
    <meta name="description" content="Basic Scene with Environment - A-Frame">

<!--stable version 0.8.0 | Dev version 0.8.2-->
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
<script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
<script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>


<!--Remote Version AR.Js 1.6.0-->
<!--<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>-->

<!--DEV Version AR.Js-->
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/dev/aframe/build/aframe-ar.js"></script>


<!--Resonance Audio for Aframe-->
<!--
<script src="https://cdn.jsdelivr.net/npm/resonance-audio/build/resonance-audio.min.js"></script>
-->
<!--<script src="script/audio/noah-ra-room_noUnlock.min.js"></script>--> <!--it throws errors if autoplay is not supported by the browser-->

<!--
<script src="script/audio/noah-ra-room.min.js"></script>
 
<script src="script/audio/noah-ra-src.min.js"></script>
  -->



<!--Local version AR js 1.5.5-->
<!--<script src="script/aframe-ar.js"></script>-->


	<script src="script/draco_decoder.js"></script>
    <script src="script/DRACOLoader.js"></script>
    <script src="script/draco_model_component.js"></script>
	<script src="script/trehunt.js"></script>
	
</head>

<body style='margin : 0px; overflow: hidden;'>

	<a-scene color-space="sRGB" renderer="gammaOutput: true" embedded arjs='sourceType: webcam; patternRatio: 0.9; trackingMethod: best;'>
	
	<a-assets markInit>
        <img id="boxTexture" src="https://i.imgur.com/mYmmbrp.jpg">
		
		<!--<a-asset-item id="sheffieldsch" src="resources/SheffieldTexture4.gltf" position="0 0.8 0" scale="1.5 1.5 1.5" rotation="45 0 0"></a-asset-item>-->
		
		<a-asset-item id="ajWalk" src="resources/ajwalk/WalkingAJRecenter.gltf" position="0 0.1 0" scale="1 1 1"></a-asset-item>
		
		<audio id="song" src="resources/DigDug.mp3"></audio>
		
		<!--<video id="gameVideo" loop="true" src="resources/Solo_Mocap_low.mp4"></video>-->
		<video id="gameVideo" loop="true" src="resources/stval_1.mp4" autoplay loop webkit-playsinline playsinline ></video>
				
    </a-assets>
	
	
	
	
	
	<!--Markers-->
	<a-marker  type="pattern" url="resources/CASATH.patt" id='markercasa' registerevents>
		<a-box id='star-box' position='0 0 0' material='color: red;'></a-box>
				<a-entity id="thesound" position="0 0 0" sound="src:#song;" ></a-entity>			
				<!--resonance audio entity
		<a-resonance-audio-room id="room" width="50" height="50" depth="50">
			<a-entity id="thesound" position="0 0 0" resonanceaudiosrc="src:#song;" ></a-entity>			
		</a-resonance-audio-room>-->
		
	</a-marker>
	
	<a-marker  type="pattern" url="resources/PATH.patt" id='markerpa' registerevents>
		<a-box id='star-box' position='0 0 0' material='color: red;'></a-box>
	</a-marker>
	
	<a-marker  type="pattern" url="resources/StarTH.patt" id='markerstar' registerevents>
		<!--<a-box id='star-box' position='0 0 0' material='color: red;'></a-box>-->
		<a-gltf-model src="#ajWalk" position="0 0 0" animation-mixer></a-gltf-model>
	</a-marker>
	
	<a-marker  type="pattern" url="resources/TreeTH.patt" id='markertree' registerevents>
		<a-box id='star-box' position='0 0 0' material='color: red;'></a-box>
		<!--<a-video id='videoplane' src="#gameVideo" width="2.5" height="1.5" position="0 1 -1" rotation="-90 0 0" material="shader:standard;"></a-video>-->
		<a-video id="videoplane" class="video" position="0 1 -1" rotation="-90 0 0" material="shader: chromakey; src: #gameVideo; color: 0 1 0"  ></a-video>
		
		
	</a-marker>
	
	<a-entity camera>
		<a-cursor></a-cursor>
	</a-entity>
	
	</a-scene>
	
	 <script>
		var videoEl = document.querySelector('#gameVideo');
		var sceneEl = document.querySelector('a-scene');
		document.querySelector('#star-box').addEventListener('click', function() 
		{
		sceneEl.querySelector('#star-box').setAttribute("material", "color: green");
		console.log('Mute False');
		videoEl.muted=false;
	});
  
  
  
  </script>
	</body>

</html>


